<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>드래그 효과내기</title>
<style>
    body{margin:0px;}
    #hero{
        border: 2px solid red;
        width: 100px;
        height: 100px;
        position: absolute; /*부모(wrapper)를 기준으로한 위치 속성*/
        left: 0px;
        top: 0px;
    }

    .wrapper{
        width: 100%;
        height: 700px;
        background: yellow;
        position: relative;/*자식때문에 명시, absolute*/
        overflow: hidden;
    }
</style>
<script>
    var hero;//여러 함수들이 두고 두고 참조하기 위해 전역변수로 선언하자
                                                                        //이럴 경우, 이 전역변수는 브라우저 즉 프로그램이 끝날 때까지 그 값이 계속 살아있다.

    var flag = false;//따라오게 할 지 여부를 결정짓는 논리 값 변수!!
                //왜 변수의 값에 숫자, 문자, 논리값 중 논리값을 이용해야 하나?
                //단 두 가지 경우만 처리할 경우 논리값이 유리하다.. 즉, 흑백논리 처리에는 논리값이 유리
                //논리값은 부정! 연산자를 이용할 경우 그 값을 뒤집을 수 있으니깐!!
    //Hard 코딩(고정된 코드): 유지보수에 좋지 않다!!!
    //함수를 정의하여, css에서 히어로의 너비, 높이를 부여하자
    //즉 프로그래밍적으로 부여하자!!
    function init(){
        //프로그램이 가동되는 시점에 이미지의 너비와 높이 부여하기
        // alert("문서가 로드되었네요!!");
        hero = document.getElementById("hero");
        hero.style.width = 200 + "px";
        hero.style.height = 200 + "px";
    }
    function getPos(){
       //마우스의 좌표 얻기!!
       
       //사용자가 브라우저상에서 일으키는 행동, 사건을 이벤트라 하고
       //모든 이벤트 정보는 자바스크립트의 event 객체가 보유하고 있다.
       var x = event.clientX;
       var y = event.clientY;

    

       //추출된 정보를 이용하여, hero의 left, top과 일치시키자!!
       //document DOM객체의 getElementById()메서드
       //hero는 객체다!!
       
       var w = hero.style.width;//px가 붙어있음
       var h = hero.style.height;//px가 붙어있음

       //주의: style.width는 숫자가 아니다, px가 붙어있다. 따라서 문자열이다
       //따라서, 계산할 때는 px를 제거해야한다.

       w = parseInt(w);//px가 사라지게된다.
       h = parseInt(h);//px가 사라지게된다.
       console.log("w=", w, "h=", h);

       hero.style.left = (x-w/2) + "px";
       hero.style.top = (y-h/2) + "px";
    }

    function follow(){
        // console.log("follow 함수 호출 중..");
        if(flag){
            getPos();
        }
    }

    //전역변수로 선언된 flag의 값을 뒤집기 위한 함수!!
    function setFlag(){
        flag = !flag;//뒤집기
        //시각적인 직관성을 부여하기 위해, 경계션으로 상태를 구분을 해보자
        //점선: 들고다닐 수 있다의 의미
        //점선 없을 때 : 못들고 다님
        
        if(flag){
            hero.style.border = "10px dotted red";//들고 다닐 수 있을 때
        }else{
            hero.style.border = "0px";//없을 때
        }
    }
</script>
</head>
<!-- onLoad 란?
    시작하는 body부터 ~~끝나는 body까지 실행부가 태그를 다 읽었을 때
    발생하는 이벤트를 감지하는 핸들러(body가 다 로드가 되면...)
    주로 팝업창을 띄울 때 쓰인다.
-->
<body onLoad = "init()" onMouseMove = "follow()">
    <!-- 물체를 대상으로 마우스를 누르고 있을때만 옮길수 있는 효과내기
        (드래그 drag)
        onmousemove는 body안에 물체(wrapper, img)만 인식한다.
    -->
    <div class = "wrapper">
         <img onclick = "setFlag()" src = "../img/hero/image1.png" id = "hero"/>
    </div>
</body>
</html>